<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Star Trek AJAX</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB"
    crossorigin="anonymous">

    
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>


<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
    crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T"
    crossorigin="anonymous"></script>
    <style>
        @font-face {
            font-family: Star Trek;
            src: url(star_cine.ttf);
        }

        h3,
        h1 {
            font-family: Star Trek;
            color: black !important;
        }

        h1 {
            letter-spacing: 4px;
            -webkit-text-stroke-width: 5px;
            -webkit-text-stroke-color:silver;
            text-shadow: 2px 0 0 #e5e4e2 !important;
        }

      
        #starTrekDiv {
            background-image: url("https://dcmstarshipsblog.files.wordpress.com/2016/09/uss-travis-2012-rendo-leave-orbit-b.jpg?w=1000&h=") !important;
            background-repeat: no-repeat;
            background-position: center;
        }
    </style>


</head>
<body>

            <div class="jumbotron" id="starTrekDiv">
                <h3>Using</h3>
                <h1> RESTful Star Trek </h1>
                <h3>API</h3>
            </div>
            <div class="jumbotron" >
                <h4>Leverage AJAX to get info on star trek!</h4>
		<h6>Copy and paste this UID below: SRMA0000000295</h6>
		<h6>To find more UID's visit: <a 						href="http://stapi.co/api/v1/rest/spacecraft/search">Star Trek 		Spacecraft</a></h6>
                <input type="text" id="starTrekID" class="form-control col-2">
                <button id="starTrekGo" class="btn btn-primary">Go!</button>
                <hr>
                <div class="text-center">
                    <!-- Using the data returned from our AJAX request, 
                    we will populate the following fields with our 
                    requested star trek's name and image-->

                    <h3 id="starTrekName"></h3>
                    <h3 id="starTrekRegistry"></h3>
                </div>
         
            </div>
        
            <script>
            window.onload = function(){
                document.getElementById('starTrekGo')
                    .addEventListener('click', getStarTrek);
            }

            //INTRO TO AJAX!
            function getStarTrek(){
                var starTrekID = document.getElementById('starTrekID').value;
                //STEP 1 - create our XMLHttpRequest object, xhr
                var xhr = new XMLHttpRequest();
                //STEP 2 - define functionality for response
                // does not HAVE to be written second. but usually is 
                // we MUST use the onreadystatechange property to manipulate response
                xhr.onreadystatechange = function(){
                    if(xhr.readyState == 4){
                        if(xhr.status == 200){
                            var starTrekText = xhr.responseText;
                            var starTrek = JSON.parse(starTrekText);
                            console.log(starTrekText);
                            setStarTrekValues(starTrek); //update html with starTrek info
                        }
                        else if(xhr.status == 400){
                            //client error
                            console.log("ERROR");
                        }
                    }
                }
                //STEP 3 - open request (configure it)
                xhr.open('GET', `http://stapi.co/api/v1/rest/spacecraft/?uid=${starTrekID}`);
                //STEP 4 - send request
                xhr.send();
            }

            function setStarTrekValues(starTrek){
                //method to update the DOM with our starTrek's info
                document.getElementById('starTrekName').innerHTML = starTrek.spacecraft.name;
                var starTrekRegistry = document.getElementById('starTrekRegistry').innerHTML = starTrek.spacecraft.registry;
            }
            
            
            
            

            </script>
    
</body>
</html>