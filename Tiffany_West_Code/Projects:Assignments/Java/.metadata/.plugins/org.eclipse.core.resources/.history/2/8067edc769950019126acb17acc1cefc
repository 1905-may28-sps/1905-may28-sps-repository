package com.revature.doa;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;

import com.revature.pojos.User;
import com.revature.util.ConnectionFactory;

public class UserDAO {

	/*
	 * 
	 * 	//prepared statement for adding user w/ create new user in main, not sure if i'll have
	 * to do the same for account to add and account or when you sign in you can add an account

	 */
	public User addUser (User add) {
		
		try(Connection conn = ConnectionFactory.getInstance().getConnection()){
			
			String sql = "insert into bank_user(first_name, last_name,username,password)"
					+ "values(?,?,?,?)";
			
			String[] generatedkeys = {"user_id"};
			
			PreparedStatement ps = conn.prepareStatement(sql,generatedkeys);
			ps.setString(1, add.getFirstName());
			ps.setString(2, add.getLastName());
			ps.setString(3, add.getUserName());
			ps.setString(4, add.getPassword());
			
			ps.executeUpdate();
			
			ResultSet pk = ps.getGeneratedKeys();
			pk.next();
			add.setId(pk.getInt(1));
			
			
		} catch (SQLException e) {
			e.printStackTrace();
		}

				
		return add;
		
	}
	
}
