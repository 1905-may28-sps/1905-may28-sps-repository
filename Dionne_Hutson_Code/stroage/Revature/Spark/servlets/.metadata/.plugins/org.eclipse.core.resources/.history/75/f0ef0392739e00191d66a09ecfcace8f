package src.com.revature.dao;

import java.math.BigDecimal;
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Timestamp;

import src.com.revature.pojo.ERS_REIMBURSEMENT;
import src.com.revature.util.ConnectionFactory;

public class ERS_RIEIMBURSEMENTDAO {
	static ERS_RIEIMBURSEMENTDAO reimDAO=new ERS_RIEIMBURSEMENTDAO();
	static ERS_REIMBURSEMENT reim= new ERS_REIMBURSEMENT();
	
	public void addReimbursement(double d,String s, int id,int status, int type) {
		
		try(Connection conn=ConnectionFactory.getInstance().getConnection()){

			String sql="insert into ERS_REIMBURSEMENT(REIMB_AMOUNT, REIMB_SUBMITTED, REIMB_RESOLVED, REIMB_DESCRIPTION, REIMB_RECEIPT, "
					+ "REIMB_AUTHOR,REIMB_RESOLVER, REIMB_STATUS_ID,REIMB_TYPE_ID)Values(?,CURRENT_TIMESTAMP,null,?,null,?,"
					+ "null,?,?)";
			
			String[] generatedKeys= {"REIMB_ID"};
			PreparedStatement ps=conn.prepareStatement(sql, generatedKeys);
			ps.setDouble(1,d);
			ps.setString(2,s);
			ps.setInt(3,id);
			ps.setInt(3,status);
			ps.setInt(3,type);

			ps.executeUpdate();

			ResultSet pk= ps.getGeneratedKeys();

			pk.next();//move to first row



		} catch (SQLException e) {
			e.printStackTrace();
		}
		
}
}
